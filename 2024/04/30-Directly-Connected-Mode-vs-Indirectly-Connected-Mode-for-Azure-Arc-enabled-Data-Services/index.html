<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/images/logo.png"><link rel="icon" href="/images/logo.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#2f4154"><meta name="author" content="Jas0n0ss"><meta name="keywords" content="oss"><meta name="description" content="Directly Connected Mode vs Indirectly Connected Mode for Azure Arc-enabled Data Services"><meta property="og:type" content="article"><meta property="og:title" content="Directly Connected Mode vs Indirectly Connected Mode for Azure Arc-enabled Data Services"><meta property="og:url" content="https://git.msft.vip/2024/04/30-Directly-Connected-Mode-vs-Indirectly-Connected-Mode-for-Azure-Arc-enabled-Data-Services/index.html"><meta property="og:site_name" content="git.msft.vip"><meta property="og:description" content="Directly Connected Mode vs Indirectly Connected Mode for Azure Arc-enabled Data Services"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://git.msft.vip/images/image-20240430232013053.png"><meta property="article:published_time" content="2024-04-30T15:14:50.000Z"><meta property="article:modified_time" content="2024-08-09T12:13:50.165Z"><meta property="article:author" content="Jas0n0ss"><meta property="article:tag" content="oss"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://git.msft.vip/images/image-20240430232013053.png"><meta name="referrer" content="no-referrer-when-downgrade"><title>Directly Connected Mode vs Indirectly Connected Mode for Azure Arc-enabled Data Services - git.msft.vip</title><link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/custom_icon/other/iconfont.css"><link rel="stylesheet" href="/css/custom_icon/phone/iconfont.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"git.msft.vip",root:"/",version:"1.9.4",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:"❡"},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!1,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 6.3.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>Jas0n0ss</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-shouye"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives"><i class="iconfont icon-guidang"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/tags"><i class="iconfont icon-biaoqian"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/video"><i class="iconfont icon-youtube"></i> <span>视频</span></a></li><li class="nav-item"><a class="nav-link" href="/music"><i class="iconfont icon-tubiaozhizuomobanyihuifu-"></i> <span>音乐</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/code.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="Directly Connected Mode vs Indirectly Connected Mode for Azure Arc-enabled Data Services"></span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> Jas0n0ss </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2024-04-30 23:14" pubdate>2024年4月30日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 4.5k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 38 分钟 </span><span id="busuanzi_container_page_pv" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="busuanzi_value_page_pv"></span> 次</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">Directly Connected Mode vs Indirectly Connected Mode for Azure Arc-enabled Data Services</h1><p class="note note-info">本文最后更新于：2024年8月9日 晚上</p><div class="markdown-body"><p>Azure Arc-enabled Data Services offers two different connectivity modes to customers – directly connected mode and indirectly connected mode. Today we will explore what each of these modes are, the capabilities they open up and which scenarios are best fit for each mode.</p><p>At a high level, the goal of the different connectivity modes is to provide customers with the option to run data services for their specific scenario. We are providing customers with the ability to be able to run data services in environments that may not have connectivity due to compliance requirements or environmental limitations. In this blog, we discuss how you can use the essential features in both modes without disruption.</p><h2 id="Directly-Connected-Mode"><a href="#Directly-Connected-Mode" class="headerlink" title="Directly Connected Mode"></a>Directly Connected Mode</h2><p>Directly Connected Mode is best fit for customers who want to be connected to Azure at all times which allows them to consume Azure services on-premises outside of Azure like:</p><ul><li>Azure Monitor</li><li>Access features like evergreen SQL</li><li>Usage and monitoring</li></ul><p>Typical use cases for directly connected mode:</p><ul><li>Organizations who use public clouds like Azure, AWS or Google Cloud</li><li>Edge locations which normally have Internet connectivity</li><li>Some examples of this can be seen with retail and manufacturing</li><li>Corporate data centers are also a good fit for directly connected mode as they have more permissive policies for connectivity</li></ul><p>Customers can configure a directly connected mode data controller in three ways:</p><ul><li>az CLI</li><li>Azure Portal</li><li>Azure Data Studio</li></ul><p>This mode uses Azure Resource Manager API’s to operate Azure Arc data services.</p><h2 id="Indirectly-Connected-Mode"><a href="#Indirectly-Connected-Mode" class="headerlink" title="Indirectly Connected Mode"></a>Indirectly Connected Mode</h2><p>Indirectly connected mode is a good option for customers who can not be connected to Azure at all times for reasons like:</p><ul><li>Internet connectivity constraints</li><li>Regulatory, security or compliance reasons</li></ul><p>In this scenario, customers can access core management services in their local environment without having a direct connection to Azure and still access all the built-in capabilities of Arc enabled Data Services such as built in HA, built in DR, built in backups, build in monitoring, built in logging, etc.</p><p>Typical use cases for indirectly connected mode:</p><ul><li>On-premises data centers that do not allow connectivity in the data region due to governmental and compliance regulations</li><li>Edge locations with minimal or no Internet connectivity</li><li>Locations with frequent power outages</li></ul><p>Customers can configure a indirectly connected mode data controller in two ways:</p><ul><li>az CLI</li><li>Azure Data Studio</li></ul><h2 id="Management-Capabilities-for-Both-Connectivity-Modes"><a href="#Management-Capabilities-for-Both-Connectivity-Modes" class="headerlink" title="Management Capabilities for Both Connectivity Modes"></a>Management Capabilities for Both Connectivity Modes</h2><p><strong>Core Capabilities:</strong></p><p>As can be seen in the diagram below, both indirectly connected mode and directly connected mode offer the core management capabilities to customers. Customers can take advantage of built in management capabilities like automatic HA&#x2F;DR, self-service provisioning, elastic scale, authentication, etc.</p><p>In indirect mode, resources need to be created directly on the cluster, and manually projected into Azure using the <code>az arcdata dc export</code>command. All deployments and management are done locally using az CLI, kubectl and Azure Data Studio.</p><p>In the direct connected mode, the Arc resources such as Arc data controller, Arc SQL MI can also be created using Azure portal, in addition to using az CLI, kubectl and Azure Data Studio.</p><p><strong>Upgrades:</strong></p><p>Upgrades works exactly the same for both direct and indirect mode. For indirect mode upgrades, customers can use the az CLI, Kubernetes native tools and Azure Data Studio. For direct mode, in addition to using the kubectl, az CLI and Azure Data Studio, you can also use the Azure Portal for upgrading your Azure Arc data controller and Azure Arc SQL Managed Instance.</p><p><strong>Billing and Monitoring:</strong></p><p>Usage information needs to be uploaded to Azure for billing purposes at least once every 30 days. In indirect mode, this is a manual two step process requiring you to (1) export the usage to a json file and (2) uploading this usage file to Azure using az CLI commands. In direct mode, these steps are automatically performed by a built-in backend service.</p><p>Optionally, Monitoring metrics and logs can also be uploaded to Azure, in both direct and indirect modes. In the indirect mode, this can be done manually by running <em>az arcdata dc export</em> command followed by an <em>az arcdata dc upload</em> command, for both metrics and logs. In the direct mode, this can be automated by configuring automatic uploads of metrics and&#x2F;or logs. This automatic upload can either be set during the Azure Arc data controller deployment, or by updating the Arc data controller post deployment.</p><p><img src="/../images/image-20240430232013053.png" srcset="/img/loading.gif" lazyload alt="image-20240430232013053"></p><p>The choice of connectivity mode is intentional and should be made prior to the deployment and this setting cannot be changed post deployment. We encourage customers to use the connectivity mode that best supports their use case. Data Services provides customers with the choice to use both modes for their specific needs. In both direct and indirect mode, the core SQL functionality remains the same and the management features work differently. As a result, the Arc Data Services platform provides you with a broad range of options for now or in the future.</p><p>Get started with a <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/azure-arc/data/create-complete-managed-instance-directly-connected">directly connected mode deployment</a> and <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/azure-arc/data/create-complete-managed-instance-indirectly-connected?tabs=linux">indirectly connected mode deployment </a>today.</p><hr><p><a target="_blank" rel="noopener" href="https://techcommunity.microsoft.com/t5/azure-arc-blog/directly-connected-mode-v-indirectly-connected-mode-for-azure/ba-p/3296657">https://techcommunity.microsoft.com/t5/azure-arc-blog/directly-connected-mode-v-indirectly-connected-mode-for-azure/ba-p/3296657</a></p></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/linux/" class="category-chain-item">linux</a></span></span></div></div><div class="license-box my-3"><div class="license-title"><div>Directly Connected Mode vs Indirectly Connected Mode for Azure Arc-enabled Data Services</div><div>https://git.msft.vip/2024/04/30-Directly-Connected-Mode-vs-Indirectly-Connected-Mode-for-Azure-Arc-enabled-Data-Services/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Jas0n0ss</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2024年4月30日</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2024年8月9日</div></div><div class="license-meta-item"><div>许可协议</div><div><a target="_blank" href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-nc"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><span class="hint--top hint--rounded" aria-label="ND - 禁止演绎"><i class="iconfont icon-nd"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2024/05/09-Cloudflare-Tunnel-%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" title="Cloudflare Tunnel 实现内网穿透"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Cloudflare Tunnel 实现内网穿透</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2024/04/09-sqlcmd-client-Connection-error-to-sqlserver-on-windows-server/" title="sqlcmd client Connection error to sqlserver on windows server"><span class="hidden-mobile">sqlcmd client Connection error to sqlserver on windows server</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div class="disqus" style="width:100%"><div id="disqus_thread"></div><script>Fluid.utils.loadComments("#disqus_thread",(function(){Fluid.utils.createCssLink("https://cdn.staticfile.org/disqusjs/1.3.0/disqusjs.css"),Fluid.utils.createScript("https://cdn.staticfile.org/disqusjs/1.3.0/disqus.js",(function(){new DisqusJS({shortname:"fluid",apikey:""})}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></div></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><script>Fluid.utils.createScript("https://cdn.staticfile.org/mermaid/8.14.0/mermaid.min.js",(function(){mermaid.initialize({theme:"default"}),Fluid.events.registerRefreshCallback((function(){"mermaid"in window&&mermaid.init()}))}))</script><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Copyrights</span></a> <i class="iconfont icon-love"></i> <a href="https://git.msft.vip" target="_blank" rel="nofollow noopener"><span>Jas0n0ss</span></a></div></div></footer><script src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://cdn.staticfile.org/jquery/3.6.0/jquery.min.js"></script><script src="https://cdn.staticfile.org/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://cdn.staticfile.org/tocbot/4.18.2/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://cdn.staticfile.org/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://cdn.staticfile.org/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>